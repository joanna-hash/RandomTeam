<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>랜덤 조 편성기</title>
  <meta name="description" content="이름 목록과 조별 인원수를 넣으면, 한 번에 랜덤으로 팀을 만들어줍니다. (예: 4,4,3)" />

  <!-- (선택) Google AdSense 자동광고: 추후 승인 후 아래 코드의 주석 해제
  <meta name="google-adsense-account" content="ca-pub-xxxxxxxxxxxxxxxx">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-xxxxxxxxxxxxxxxx" crossorigin="anonymous"></script>
  -->

  <style>
    :root {
      --bg: #0f1115;
      --card: #171a21;
      --muted: #99a2b2;
      --text: #e7eaf3;
      --accent: #7aa2ff;
      --accent-2: #9ae6b4;
      --danger: #ff6b6b;
      --border: #262a36;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Noto Sans, "Apple SD Gothic Neo", "Malgun Gothic", sans-serif;
      background: radial-gradient(1200px 800px at 10% -10%, #1b2030 0%, #0f1115 60%);
      color: var(--text);
      line-height: 1.6;
    }
    .wrap {
      max-width: 920px;
      margin: 56px auto;
      padding: 0 20px;
    }
    header {
      text-align: center;
      margin-bottom: 24px;
    }
    .title {
      font-size: 36px; font-weight: 800; letter-spacing: -0.02em;
    }
    .subtitle { color: var(--muted); margin-top: 6px; }
    .card {
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.00));
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 22px;
      backdrop-filter: blur(6px);
      box-shadow: 0 10px 30px rgba(0,0,0,.3);
    }
    .grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 16px;
    }
    @media (min-width: 860px) {
      .grid { grid-template-columns: 1.3fr 1fr; }
    }
    label { display: block; font-weight: 600; margin-bottom: 6px; }
    .hint { color: var(--muted); font-size: 14px; }
    textarea, input {
      width: 100%;
      background: #0d0f14;
      color: var(--text);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 12px 14px;
      outline: none;
      transition: border .2s ease, box-shadow .2s ease;
    }
    textarea:focus, input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 4px rgba(122,162,255,.15);
    }
    .row {
      display: grid; grid-template-columns: 1fr 1fr; gap: 12px;
    }
    .btn {
      display: inline-flex; align-items: center; justify-content: center;
      gap: 8px; width: 100%;
      padding: 12px 14px; border: 0; border-radius: 12px;
      cursor: pointer; font-weight: 700; letter-spacing: .2px;
      background: linear-gradient(135deg, var(--accent), #5c7cff);
      color: #0b0d12;
      transition: transform .04s ease, filter .2s ease;
    }
    .btn:active { transform: translateY(1px); }
    .btn.secondary {
      background: transparent; color: var(--text);
      border: 1px solid var(--border);
    }
    .error {
      margin-top: 10px; color: var(--danger); font-weight: 600; display: none;
    }
    .result {
      margin-top: 18px; display: grid; gap: 14px;
    }
    .team {
      border: 1px solid var(--border);
      border-radius: 14px; padding: 14px;
      background: #10141c;
    }
    .team h3 {
      margin: 0 0 10px; font-size: 18px;
      display: inline-flex; align-items: center; gap: 8px;
    }
    .badge {
      display: inline-block; font-size: 12px; font-weight: 700;
      padding: 4px 8px; border-radius: 999px; color: #0b0d12;
      background: linear-gradient(135deg, var(--accent-2), #79ffe1);
    }
    ul { margin: 0; padding-left: 18px; }
    .muted { color: var(--muted); font-size: 14px; }
    footer { margin: 28px 0 12px; text-align: center; color: var(--muted); font-size: 13px; }
    .ads-slot {
      margin: 22px 0;
      border: 1px dashed var(--border);
      border-radius: 12px;
      padding: 10px;
      text-align: center;
      color: var(--muted);
      font-size: 13px;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="title">🎲 랜덤 조 편성기</div>
      <div class="subtitle">이름과 조별 인원수를 넣고 버튼만 누르세요. (예: <b>4,4,3</b>)</div>
    </header>

    <div class="grid card">
      <!-- 입력 영역 -->
      <section>
        <div style="margin-bottom:14px">
          <label for="names">팀원 이름 목록</label>
          <div class="hint">줄바꿈 또는 쉼표로 구분 · 예: 지훈, 수빈, 다혜 …</div>
          <textarea id="names" rows="10" placeholder="지훈
수빈
다혜
진호
민지
태윤
은서
재혁
서현
도윤
하람"></textarea>
        </div>

        <div class="row" style="margin-bottom:12px">
          <div>
            <label for="groupSizes">조별 인원수</label>
            <input id="groupSizes" type="text" placeholder="예: 4,4,3" />
          </div>
          <div>
            <label for="seed">고급(선택): 시드</label>
            <input id="seed" type="text" placeholder="동일 결과를 재현하고 싶을 때" />
          </div>
        </div>

        <div class="row">
          <button class="btn" id="makeBtn">조 편성하기</button>
          <button class="btn secondary" id="copyBtn">결과 복사</button>
        </div>
        <div id="error" class="error">입력을 확인해주세요.</div>

        <!-- (선택) 광고 영역 예시 슬롯 -->
        <div class="ads-slot">
          광고 영역(예시). AdSense 승인 후 여기에 <code>&lt;ins class="adsbygoogle"&gt;</code> 블록을 넣으면 됩니다.
        </div>
      </section>

      <!-- 결과 영역 -->
      <section>
        <div class="muted">결과</div>
        <div id="result" class="result">
          <div class="muted">아직 결과가 없습니다. “조 편성하기”를 눌러보세요.</div>
        </div>
      </section>
    </div>

    <footer>© <span id="year"></span> Random Team Maker • GitHub Pages</footer>
  </div>

  <script>
    // 유틸: 시드 기반 난수(재현 가능 랜덤)
    function mulberry32(a) {
      return function() {
        let t = a += 0x6D2B79F5;
        t = Math.imul(t ^ t >>> 15, t | 1);
        t ^= t + Math.imul(t ^ t >>> 7, t | 61);
        return ((t ^ t >>> 14) >>> 0) / 4294967296;
      }
    }
    function seededShuffle(array, seedStr) {
      if (!seedStr) {
        // 기본: 크립토 > Math.random fallback
        const rand = window.crypto && crypto.getRandomValues ? () => {
          const u32 = new Uint32Array(1); crypto.getRandomValues(u32);
          return u32[0] / 2**32;
        } : Math.random;
        for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(rand() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
      }
      // 시드 문자열을 숫자로 해시
      let h = 2166136261 >>> 0;
      for (let i = 0; i < seedStr.length; i++) {
        h ^= seedStr.charCodeAt(i);
        h = Math.imul(h, 16777619);
      }
      const rng = mulberry32(h >>> 0);
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(rng() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function parseNames(text) {
      return text
        .split(/\n|,/)
        .map(s => s.trim())
        .filter(Boolean);
    }
    function parseGroupSizes(text) {
      const arr = text.split(",").map(s => parseInt(s.trim(), 10));
      if (!arr.length || arr.some(n => isNaN(n) || n <= 0)) return null;
      return arr;
    }
    function renderTeams(container, teams) {
      container.innerHTML = "";
      teams.forEach((team, i) => {
        const el = document.createElement("div");
        el.className = "team";
        el.innerHTML = `
          <h3>팀 ${i+1} <span class="badge">${team.length}명</span></h3>
          <ul>${team.map(n => `<li>${escapeHtml(n)}</li>`).join("")}</ul>
        `;
        container.appendChild(el);
      });
    }
    function escapeHtml(s) {
      return s.replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));
    }
    function makeTeams() {
      const namesInput = document.getElementById("names").value.trim();
      const sizesInput = document.getElementById("groupSizes").value.trim();
      const seed = document.getElementById("seed").value.trim();
      const errorEl = document.getElementById("error");
      const resultEl = document.getElementById("result");

      errorEl.style.display = "none";

      const names = parseNames(namesInput);
      const sizes = parseGroupSizes(sizesInput);
      if (!names.length || !sizes) {
        errorEl.textContent = "이름 목록과 올바른 조별 인원수(예: 4,4,3)를 입력해주세요.";
        errorEl.style.display = "block";
        return;
      }
      const sum = sizes.reduce((a,b)=>a+b,0);
      if (sum > names.length) {
        errorEl.textContent = `조 인원 합(${sum}명)이 이름 수(${names.length}명)보다 많습니다.`;
        errorEl.style.display = "block";
        return;
      }

      const shuffled = seededShuffle([...names], seed);
      const teams = [];
      let idx = 0;
      for (const sz of sizes) {
        teams.push(shuffled.slice(idx, idx + sz));
        idx += sz;
      }
      if (idx < shuffled.length) {
        // 남는 인원은 마지막 팀에 합치기(필요 시 로직 변경)
        teams[teams.length - 1] = teams[teams.length - 1].concat(shuffled.slice(idx));
      }
      renderTeams(resultEl, teams);
      // 결과 텍스트 저장(복사용)
      window.__lastTeamsText = teams.map((t,i)=>`[팀 ${i+1} - ${t.length}명]\n`+t.map(n=>`- ${n}`).join("\n")).join("\n\n");
    }

    function copyResult() {
      const text = window.__lastTeamsText;
      if (!text) {
        alert("아직 생성된 결과가 없습니다. 먼저 '조 편성하기'를 눌러주세요.");
        return;
      }
      navigator.clipboard.writeText(text).then(
        ()=>alert("결과가 복사되었습니다!"),
        ()=>alert("복사에 실패했습니다. 브라우저 권한을 확인해주세요.")
      );
    }

    document.getElementById("makeBtn").addEventListener("click", makeTeams);
    document.getElementById("copyBtn").addEventListener("click", copyResult);
    document.getElementById("year").textContent = new Date().getFullYear();
  </script>

  <!-- (선택) 개별 광고 유닛을 쓰고 싶다면, 승인 후 본문 적당한 위치에 이런 블록을 배치
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-xxxxxxxxxxxxxxxx"
       data-ad-slot="1234567890"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
  -->
</body>
</html>
